import React from 'react';
import { Tooltip } from 'antd';
import 'antd/lib/tooltip/style/css'

const Keys = ({
  color,
  fewerText,
  lowerText,
  maxCount,
  size = 'default',
}) => {
  const interval = Math.floor(maxCount / 4);
  // Ar
  const basicCaption = [
    [0, 0, 0, 0],
    [0, 0, 0, 1],
    [0, 0, 1, 2],
    [0, 1, 2, 3]
  ];

  const classSize = size === 'default' ? '' : `-${size}`;

  const getCaption = () => {
    const keys = [];
    for (let i = 0; i <= 4; i++) {
      const y = i - 1;
      const start = interval * (y) + 1;
      const end = start + interval - 1;
      let title = ` From ${start} to ${i === 4 ? maxCount : end}`
      if (i === 0) {
        keys.push(
          <Tooltip
            key={i}
            title={`0`}
          >
            <div className={`cal-heatmap_day cal-heatmap_key-day${classSize}`} />
          </Tooltip>
        )
      } else {
        if (maxCount < 4) {
          const number = `${basicCaption[maxCount][i - 1]}`;
          title = number === '0' ? '0' : `From ${number} to ${number}`;
        }
        keys.push(
          <Tooltip
            key={i}
            title={title}
          >
            <div className={`cal-heatmap_day cal-heatmap_key-day${classSize} is-level-${i} ${color}`} />
          </Tooltip>
        )
      }
    }
    return keys;
  }
  return (
    <div className="cal-heatmap_container">
      <span className={`cal-heatmap_label${classSize}`}>{fewerText}</span>
      <div className="cal-heatmap_day-showers">
        {getCaption()}
      </div>
      <span className={`cal-heatmap_label${classSize}`}>{lowerText}</span>
    </div>
  );
}

export default Keys;
